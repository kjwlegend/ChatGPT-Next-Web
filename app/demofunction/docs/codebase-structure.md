# 思维导图代码结构

## 核心组件
- MindMap
  - 主要容器组件
  - 集成 ReactFlow
  - 状态管理和事件处理
- MindMapNode
  - 自定义节点组件
  - 节点编辑和交互
  - 右键菜单功能
- DataControls
  - 导入导出控制
  - 文件处理
  - 格式转换

## 自定义 Hooks
- useMindMapLogic
  - 状态管理
  - 事件处理
  - 节点操作
- useKeyboardShortcuts
  - 快捷键绑定
  - 操作分发
- useClipboard
  - 复制粘贴功能
  - 数据转换
- useHistory
  - 撤销重做
  - 状态历史
- useImport/useExport
  - 文件导入导出
  - 格式处理

## 工具函数
- layout.ts
  - 节点位置计算
  - 布局优化
  - 重叠检测
- markdownConverter.ts
  - Markdown解析
  - 树形结构转换
  - 格式导出
- dataConverter.ts
  - JSON数据处理
  - 数据验证
  - 格式转换

## 类型定义
- MindMapData
  - 节点数据
  - 边数据
  - 状态定义
- NodeTypes
  - 节点属性
  - 事件处理器
- HistoryState
  - 历史记录
  - 状态快照

## 交互功能
- 节点操作
  - 添加子节点
  - 添加父节点
  - 添加同级节点
  - 删除节点
- 编辑功能
  - 双击编辑
  - 右键菜单
  - 拖拽创建
- 快捷键
  - Enter：同级节点
  - Shift+Enter：子节点
  - Delete：删除
  - Ctrl+Z：撤销

## 数据处理
- 导入导出
  - JSON格式
  - Markdown格式
  - 图片导出
- 数据转换
  - 树形结构
  - 平面结构
  - 格式验证
- 状态管理
  - 历史记录
  - 撤销重做
  - 数据同步 